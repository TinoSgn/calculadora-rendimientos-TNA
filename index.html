<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Calculadora Rendimientos (TNA manual)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="preconnect" href="https://cdn.jsdelivr.net" />
    <link rel="stylesheet" href="style.css" />
    <script
      src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"
      defer
    ></script>
    <script src="script.js" defer></script>
  </head>
  <body>
    <main class="container">
      <header>
        <h1>Calculadora de Rendimientos (TNA manual)</h1>
        <p class="muted">
          Interés compuesto diario (30 días para mes, 365 para año).
        </p>
      </header>

      <section class="card">
        <h2>Parámetros</h2>
        <div class="grid">
          <label class="field">
            <span>Monto a invertir ($)</span>
            <input
              id="monto"
              type="text"
              inputmode="decimal"
              value="100.000"
              autocomplete="off"
            />
            <small class="muted"
              >Se formatea con puntos (.) para miles automáticamente.</small
            >
          </label>

          <label class="field">
            <span>TNA manual (%)</span>
            <input id="tnaManual" type="number" min="0" step="0.1" value="36" />
            <small class="muted"
              >Nominal anual. Se asume capitalización diaria para la
              proyección.</small
            >
          </label>
        </div>

        <div class="row" style="margin-top: 10px">
          <div class="row gap">
            <button id="btnExport" class="btn">Exportar tabla (CSV)</button>
            <button id="btnReset" class="btn">Reset</button>
          </div>
        </div>
      </section>

      <section class="card">
        <h2>Resultados</h2>
        <div class="results">
          <div class="result">
            <div class="label">TNA usada</div>
            <div class="value"><span id="tnaUsada">–</span> %</div>
            <div class="sub">Ingresada manualmente</div>
          </div>
          <div class="result">
            <div class="label">TEA (efectiva anual)</div>
            <div class="value"><span id="tea">–</span> %</div>
            <div class="sub">
              Calculada: (1 + r<sub>d</sub>)<sup>365</sup> − 1
            </div>
          </div>
          <div class="result">
            <div class="label">Tasa diaria</div>
            <div class="value"><span id="tasaDiaria">–</span> %</div>
            <div class="sub">r<sub>d</sub> = TNA/365</div>
          </div>
          <div class="result">
            <div class="label">Ganancia diaria</div>
            <div class="value">$ <span id="gananciaDiaria">–</span></div>
            <div class="sub">simple (sin reinvertir)</div>
          </div>
          <div class="result">
            <div class="label">Ganancia mensual</div>
            <div class="value">$ <span id="gananciaMensual">–</span></div>
            <div class="sub">30 días con reinversión diaria</div>
          </div>
          <div class="result">
            <div class="label">Ganancia anual</div>
            <div class="value">$ <span id="gananciaAnual">–</span></div>
            <div class="sub">365 días con reinversión diaria</div>
          </div>
        </div>
      </section>

      <section class="card">
        <div class="card-header-flex">
          <h2>Proyección (Gráfico)</h2>
          <div class="toggle">
            <label
              ><input
                type="radio"
                name="granularidad"
                value="mensual"
                checked
              />
              Gráfico Mensual</label
            >
            <label
              ><input type="radio" name="granularidad" value="diaria" /> Gráfico
              Diario</label
            >
          </div>
        </div>
        <canvas id="chart" height="120"></canvas>
      </section>

      <section class="card">
        <div class="card-header-flex">
          <h2>Tabla de proyección</h2>
          <div class="toggle" style="margin-bottom: 0">
            <label
              ><input type="radio" name="tablaGran" value="mensual" checked />
              Mensual (12 meses)</label
            >
            <label
              ><input type="radio" name="tablaGran" value="diaria" /> Diaria (30
              días)</label
            >
          </div>
        </div>

        <div id="tablaContMensual">
          <div class="table-wrap">
            <table id="tablaMensual">
              <thead>
                <tr>
                  <th>Mes</th>
                  <th>Saldo inicial</th>
                  <th>Interés del mes</th>
                  <th>Saldo final</th>
                </tr>
              </thead>
              <tbody id="tablaBodyMensual"></tbody>
            </table>
          </div>
        </div>

        <div id="tablaContDiaria" style="display: none">
          <div class="table-wrap">
            <table id="tablaDiaria">
              <thead>
                <tr>
                  <th>Día</th>
                  <th>Saldo inicial</th>
                  <th>Interés del día</th>
                  <th>Saldo final</th>
                </tr>
              </thead>
              <tbody id="tablaBodyDiaria"></tbody>
            </table>
          </div>
        </div>
      </section>

      <footer>
        <p class="muted">
          Este mini proyecto usa HTML/CSS/JS puro + Chart.js. No requiere
          backend.
        </p>
      </footer>
    </main>
  </body>
</html>
